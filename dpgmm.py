import numpy
from sklearn import mixture

FILENAME = "mcdonalds-cleaned-rand.tsv"

x = numpy.loadtxt(open(FILENAME, "rb"), delimiter = "\t", skiprows = 1)
dpgmm = mixture.DPGMM(n_components = 25)
dpgmm.fit(x)
clusters = dpgmm.predict(x)

s = []
for i in range(26, len(x)):
  dpgmm.fit(x[1:i]); p = dpgmm.predict(x); s.append((i, len(set(p))))
  print s
    
print s

[(26, 4), (27, 5), (28, 5), (29, 5), (30, 4), (31, 4), (32, 4), (33, 4), (34, 5), (35, 5), (36, 4), (37, 4), (38, 4), (39, 4), (40, 3), (41, 4), (42, 4), (43, 4), (44, 5), (45, 4), (46, 4), (47, 4), (48, 4), (49, 4), (50, 4), (51, 4), (52, 3), (53, 5), (54, 4), (55, 4), (56, 4), (57, 5), (58, 5), (59, 6), (60, 6), (61, 6), (62, 7), (63, 6), (64, 7), (65, 6), (66, 6), (67, 7), (68, 6), (69, 6), (70, 6), (71, 6), (72, 7), (73, 7), (74, 6), (75, 6), (76, 6), (77, 6), (78, 6), (79, 6), (80, 8), (81, 7), (82, 7), (83, 7), (84, 7), (85, 7), (86, 8), (87, 6), (88, 6), (89, 7), (90, 6), (91, 7), (92, 7), (93, 7), (94, 7), (95, 9), (96, 6), (97, 7), (98, 7), (99, 7), (100, 7), (101, 6), (102, 7), (103, 7), (104, 7), (105, 6), (106, 7), (107, 7), (108, 7), (109, 7), (110, 7), (111, 7), (112, 8), (113, 8), (114, 8), (115, 7), (116, 7), (117, 6), (118, 8), (119, 9), (120, 8), (121, 9), (122, 9), (123, 9), (124, 8), (125, 9), (126, 6), (127, 8), (128, 6), (129, 9), (130, 7), (131, 9), (132, 7), (133, 8), (134, 9), (135, 9), (136, 10), (137, 9), (138, 9), (139, 10), (140, 10), (141, 10), (142, 8), (143, 8), (144, 7), (145, 10), (146, 10), (147, 9), (148, 6), (149, 10), (150, 10), (151, 9), (152, 9), (153, 10), (154, 12), (155, 7), (156, 8), (157, 8), (158, 11), (159, 10), (160, 9), (161, 6), (162, 9), (163, 10), (164, 10), (165, 8), (166, 11), (167, 8), (168, 9), (169, 9), (170, 7), (171, 8), (172, 10), (173, 6), (174, 10), (175, 7), (176, 10), (177, 8), (178, 10), (179, 10), (180, 9), (181, 10), (182, 11), (183, 8), (184, 9), (185, 10), (186, 9), (187, 10), (188, 11), (189, 12), (190, 10), (191, 9), (192, 9), (193, 9), (194, 10), (195, 9), (196, 12), (197, 10), (198, 11), (199, 12), (200, 12), (201, 8), (202, 12), (203, 10), (204, 10), (205, 8), (206, 13), (207, 11), (208, 11), (209, 8), (210, 9), (211, 10), (212, 9), (213, 10), (214, 11), (215, 12), (216, 13), (217, 13), (218, 10), (219, 10), (220, 11), (221, 9), (222, 10), (223, 11), (224, 12), (225, 11), (226, 11), (227, 12), (228, 11), (229, 11), (230, 12), (231, 9), (232, 11), (233, 9), (234, 10), (235, 12), (236, 9), (237, 11), (238, 11), (239, 10), (240, 11), (241, 10), (242, 11), (243, 10), (244, 11), (245, 9), (246, 11), (247, 11), (248, 10), (249, 11), (250, 11), (251, 11), (252, 10), (253, 13), (254, 10), (255, 12), (256, 11), (257, 12), (258, 11), (259, 12), (260, 11), (261, 10), (262, 10), (263, 12), (264, 13), (265, 11), (266, 9), (267, 11), (268, 12), (269, 12), (270, 10), (271, 12), (272, 10), (273, 10), (274, 10), (275, 11), (276, 10), (277, 10), (278, 10), (279, 11), (280, 10), (281, 9), (282, 11), (283, 10), (284, 11), (285, 10), (286, 11), (287, 9), (288, 10), (289, 12), (290, 10), (291, 10), (292, 10), (293, 10), (294, 11), (295, 11), (296, 14), (297, 11), (298, 11), (299, 11), (300, 10), (301, 11), (302, 11), (303, 13), (304, 11), (305, 10), (306, 12), (307, 11), (308, 12), (309, 11), (310, 11), (311, 11), (312, 11), (313, 12), (314, 11), (315, 10), (316, 11), (317, 10), (318, 11), (319, 13), (320, 11), (321, 11), (322, 11), (323, 11), (324, 10), (325, 11)]

num_clusters = c(4, 5, 5, 5, 4, 4, 4, 4, 5, 5, 4, 4, 4, 4, 3, 4, 4, 4, 5, 4, 4, 4, 4, 4, 4, 4, 3, 5, 4, 4, 4, 5, 5, 6, 6, 6, 7, 6, 7, 6, 6, 7, 6, 6, 6, 6, 7, 7, 6, 6, 6, 6, 6, 6, 8, 7, 7, 7, 7, 7, 8, 6, 6, 7, 6, 7, 7, 7, 7, 9, 6, 7, 7, 7, 7, 6, 7, 7, 7, 6, 7, 7, 7, 7, 7, 7, 8, 8, 8, 7, 7, 6, 8, 9, 8, 9, 9, 9, 8, 9, 6, 8, 6, 9, 7, 9, 7, 8, 9, 9, 10, 9, 9, 10, 10, 10, 8, 8, 7, 10, 10, 9, 6, 10, 10, 9, 9, 10, 12, 7, 8, 8, 11, 10, 9, 6, 9, 10, 10, 8, 11, 8, 9, 9, 7, 8, 10, 6, 10, 7, 10, 8, 10, 10, 9, 10, 11, 8, 9, 10, 9, 10, 11, 12, 10, 9, 9, 9, 10, 9, 12, 10, 11, 12, 12, 8, 12, 10, 10, 8, 13, 11, 11, 8, 9, 10, 9, 10, 11, 12, 13, 13, 10, 10, 11, 9, 10, 11, 12, 11, 11, 12, 11, 11, 12, 9, 11, 9, 10, 12, 9, 11, 11, 10, 11, 10, 11, 10, 11, 9, 11, 11, 10, 11, 11, 11, 10, 13, 10, 12, 11, 12, 11, 12, 11, 10, 10, 12, 13, 11, 9, 11, 12, 12, 10, 12, 10, 10, 10, 11, 10, 10, 10, 11, 10, 9, 11, 10, 11, 10, 11, 9, 10, 12, 10, 10, 10, 10, 11, 11, 14, 11, 11, 11, 10, 11, 11, 13, 11, 10, 12, 11, 12, 11, 11, 11, 11, 12, 11, 10, 11, 10, 11, 13, 11, 11, 11, 11, 10, 11)
> num_points = 26:325
> qplot(num_points, num_clusters)
> qplot(num_points, num_clusters, geom = "line")
> d = data.frame(num_points = 26:325, num_clusters = num_clusters)
> qplot(num_points, num_clusters, data = subset(d, num_clusters % 5 == 1), geom = "line")
Error: unexpected input in "qplot(num_points, num_clusters, data = subset(d, num_clusters % 5 == 1), geom = "line")"
> qplot(num_points, num_clusters, data = subset(d, num_clusters %% 5 == 1), geom = "line")
> qplot(num_points, num_clusters, data = subset(d, num_points %% 5 == 1), geom = "line")
> qplot(num_points, num_clusters, data = subset(d, num_points %% 5 == 1), geom = "line") + geom_smooth()
> qplot(num_points, num_clusters, data = subset(d, num_points %% 5 == 1), geom = "line") + geom_smooth(se = 0)
> qplot(num_points, num_clusters, data = subset(d, num_points %% 5 == 1), geom = "line", xlab = "Number of food items", ylab = "Number of clusters inferred", main = "Number of clusters discovered by Dirichlet Process Mixture") + geom_smooth(se = 0)
> qplot(num_points, num_clusters, data = subset(d, num_points %% 5 == 1), geom = "line", xlab = "Number of food items", ylab = "Number of clusters inferred", main = "How does the number of clusters inferred by the Dirichlet Process Mixture change as more food items arrive?") + geom_smooth(se = 0)
> qplot(num_points, num_clusters, data = subset(d, num_points %% 5 == 1), geom = "line", xlab = "Number of food items", ylab = "Number of clusters inferred", main = "How does the number of clusters inferred by the DPM change as more food items arrive?") + geom_smooth(se = 0)
>